{"version":3,"file":"commonHelpers.js","sources":["../src/js/refs.js","../src/js/spinner.js","../src/js/usplashAPI.js","../src/js/createMarkUp.js","../src/js/hasMoreData.js","../src/js/onScroll.js","../src/main.js"],"sourcesContent":["export const formEl = document.querySelector('.js-search-form');\nexport const listEl = document.querySelector('.js-gallery');\nexport const loadMoreBtn = document.querySelector('.js-load-more');\nexport const spinnerContainer = document.querySelector('.js-backdrop');\n","import { Spinner } from 'spin.js';\nimport { spinnerContainer } from './refs';\n\nconst opts = {\n  lines: 10, // The number of lines to draw\n  length: 38, // The length of each line\n  width: 7, // The line thickness\n  radius: 45, // The radius of the inner circle\n  scale: 1.15, // Scales overall size of the spinner\n  corners: 1, // Corner roundness (0..1)\n  speed: 1, // Rounds per second\n  rotate: 0, // The rotation offset\n  animation: 'spinner-line-fade-quick', // The CSS animation name for the lines\n  direction: 1, // 1: clockwise, -1: counterclockwise\n  color: '#ffffff', // CSS color or array of colors\n  fadeColor: 'transparent', // CSS color or array of colors\n  top: '50%', // Top position relative to parent\n  left: '50%', // Left position relative to parent\n  shadow: '0 0 1px transparent', // Box-shadow for the lines\n  zIndex: 2000000000, // The z-index (defaults to 2e9)\n  className: 'spinner', // The CSS class to assign to the spinner\n  position: 'absolute', // Element positioning\n};\n\nconst spinner = new Spinner(opts);\n\nexport const spinnerPlay = () => {\n  spinnerContainer.classList.remove('is-hidden');\n  spinner.spin(spinnerContainer);\n};\n\nexport const spinnerStop = () => {\n  spinnerContainer.classList.add('is-hidden');\n  spinner.stop();\n};\n","import axios from 'axios';\n\nexport const getPhotos = (query, page) => {\n  axios.defaults.baseURL = 'https://api.unsplash.com';\n  axios.defaults.headers.common['Authorization'] =\n    'Client-ID LxvKVGJqiSe6NcEVZOaLXC-f2JIIWZaq_o0WrF8mwJc';\n  return axios.get('/search/photos', {\n    params: {\n      query,\n      page,\n      per_page: 12,\n      orientation: 'portrait',\n    },\n  });\n};\n","export const createMarkUp = array => {\n  return array\n    .map(\n      photo => `\n    <li class='gallery__item'>\n       <img src='${photo.urls.small}' alt='${photo.alt_description}' class='gallery-img' />\n     </li>\n   `\n    )\n    .join('');\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { loadMoreBtn } from './refs';\n\nexport const hasMoreData = (lastPage, page) => {\n  if (page < lastPage) {\n    loadMoreBtn.classList.remove('is-hidden');\n  } else {\n    iziToast.info({\n      position: 'topRight', // bottomRight, bottomLeft, topRight, topLeft, topCenter, bottomCenter, center\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n    loadMoreBtn.classList.add('is-hidden');\n  }\n};\n","export const onScroll = () => {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n};\n","import { formEl, listEl, loadMoreBtn } from './js/refs';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { spinnerPlay, spinnerStop } from './js/spinner';\nimport { getPhotos } from './js/usplashAPI';\nimport { createMarkUp } from './js/createMarkUp';\nimport { hasMoreData } from './js/hasMoreData';\nimport { onScroll } from './js/onScroll';\n\nlet query = null;\nlet page = 1;\n\nconst handleSubmit = async event => {\n  event.preventDefault();\n  spinnerPlay();\n  page = 1;\n  query = event.currentTarget.elements['user-search-query'].value.trim();\n\n  if (!query) {\n    spinnerStop();\n    return iziToast.warning({\n      position: 'center',\n      message: 'Empty query',\n    });\n  }\n\n  try {\n    const {\n      data: { results, total, total_pages },\n    } = await getPhotos(query, page);\n    if (results.length === 0) {\n      listEl.innerHTML = '';\n      loadMoreBtn.classList.add('is-hidden');\n      return iziToast.error({\n        position: 'center',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n    iziToast.success({\n      position: 'topRight', // bottomRight, bottomLeft, topRight, topLeft, topCenter, bottomCenter, center\n      message: `\"Hooray! We found ${total} images.\"`,\n    });\n\n    listEl.innerHTML = createMarkUp(results);\n\n    hasMoreData(total_pages, page);\n  } catch (error) {\n    console.log(error);\n  } finally {\n    spinnerStop();\n  }\n};\n\nconst handleMoreData = async () => {\n  page += 1;\n  spinnerPlay();\n\n  try {\n    const {\n      data: { results, total_pages },\n    } = await getPhotos(query, page);\n\n    listEl.insertAdjacentHTML('beforeend', createMarkUp(results));\n    // Функція для скролу\n    onScroll();\n\n    hasMoreData(total_pages, page);\n  } catch (error) {\n    console.log(error);\n  } finally {\n    spinnerStop();\n  }\n};\n\nformEl.addEventListener('submit', handleSubmit);\nloadMoreBtn.addEventListener('click', handleMoreData);\n"],"names":["formEl","listEl","loadMoreBtn","spinnerContainer","opts","spinner","Spinner","spinnerPlay","spinnerStop","getPhotos","query","page","axios","createMarkUp","array","photo","hasMoreData","lastPage","iziToast","onScroll","cardHeight","handleSubmit","event","results","total","total_pages","error","handleMoreData"],"mappings":"0vBAAO,MAAMA,EAAS,SAAS,cAAc,iBAAiB,EACjDC,EAAS,SAAS,cAAc,aAAa,EAC7CC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAmB,SAAS,cAAc,cAAc,ECA/DC,EAAO,CACX,MAAO,GACP,OAAQ,GACR,MAAO,EACP,OAAQ,GACR,MAAO,KACP,QAAS,EACT,MAAO,EACP,OAAQ,EACR,UAAW,0BACX,UAAW,EACX,MAAO,UACP,UAAW,cACX,IAAK,MACL,KAAM,MACN,OAAQ,sBACR,OAAQ,IACR,UAAW,UACX,SAAU,UACZ,EAEMC,EAAU,IAAIC,EAAQF,CAAI,EAEnBG,EAAc,IAAM,CAC/BJ,EAAiB,UAAU,OAAO,WAAW,EAC7CE,EAAQ,KAAKF,CAAgB,CAC/B,EAEaK,EAAc,IAAM,CAC/BL,EAAiB,UAAU,IAAI,WAAW,EAC1CE,EAAQ,KAAI,CACd,EChCaI,EAAY,CAACC,EAAOC,KAC/BC,EAAM,SAAS,QAAU,2BACzBA,EAAM,SAAS,QAAQ,OAAO,cAC5B,wDACKA,EAAM,IAAI,iBAAkB,CACjC,OAAQ,CACN,MAAAF,EACA,KAAAC,EACA,SAAU,GACV,YAAa,UACd,CACL,CAAG,GCbUE,EAAeC,GACnBA,EACJ,IACCC,GAAS;AAAA;AAAA,mBAEIA,EAAM,KAAK,eAAeA,EAAM;AAAA;AAAA,IAG9C,EACA,KAAK,EAAE,ECJCC,EAAc,CAACC,EAAUN,IAAS,CACzCA,EAAOM,EACTf,EAAY,UAAU,OAAO,WAAW,GAExCgB,EAAS,KAAK,CACZ,SAAU,WACV,QAAS,4DACf,CAAK,EACDhB,EAAY,UAAU,IAAI,WAAW,EAEzC,ECfaiB,EAAW,IAAM,CAC5B,KAAM,CAAE,OAAQC,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAE1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH,ECAA,IAAIV,EAAQ,KACRC,EAAO,EAEX,MAAMU,EAAe,MAAMC,GAAS,CAMlC,GALAA,EAAM,eAAc,EACpBf,IACAI,EAAO,EACPD,EAAQY,EAAM,cAAc,SAAS,qBAAqB,MAAM,OAE5D,CAACZ,EACH,OAAAF,IACOU,EAAS,QAAQ,CACtB,SAAU,SACV,QAAS,aACf,CAAK,EAGH,GAAI,CACF,KAAM,CACJ,KAAM,CAAE,QAAAK,EAAS,MAAAC,EAAO,YAAAC,CAAa,CACtC,EAAG,MAAMhB,EAAUC,EAAOC,CAAI,EAC/B,GAAIY,EAAQ,SAAW,EACrB,OAAAtB,EAAO,UAAY,GACnBC,EAAY,UAAU,IAAI,WAAW,EAC9BgB,EAAS,MAAM,CACpB,SAAU,SACV,QACE,0EACV,CAAO,EAEHA,EAAS,QAAQ,CACf,SAAU,WACV,QAAS,qBAAqBM,YACpC,CAAK,EAEDvB,EAAO,UAAYY,EAAaU,CAAO,EAEvCP,EAAYS,EAAad,CAAI,CAC9B,OAAQe,EAAP,CACA,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRlB,GACD,CACH,EAEMmB,EAAiB,SAAY,CACjChB,GAAQ,EACRJ,IAEA,GAAI,CACF,KAAM,CACJ,KAAM,CAAE,QAAAgB,EAAS,YAAAE,CAAa,CAC/B,EAAG,MAAMhB,EAAUC,EAAOC,CAAI,EAE/BV,EAAO,mBAAmB,YAAaY,EAAaU,CAAO,CAAC,EAE5DJ,IAEAH,EAAYS,EAAad,CAAI,CAC9B,OAAQe,EAAP,CACA,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRlB,GACD,CACH,EAEAR,EAAO,iBAAiB,SAAUqB,CAAY,EAC9CnB,EAAY,iBAAiB,QAASyB,CAAc"}