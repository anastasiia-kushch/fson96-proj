import{S,a as u,i}from"./assets/vendor-28f972c5.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function c(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=c(r);fetch(r.href,s)}})();const b=document.querySelector(".js-search-form"),p=document.querySelector(".js-gallery"),l=document.querySelector(".js-load-more"),f=document.querySelector(".js-backdrop"),v={lines:10,length:38,width:7,radius:45,scale:1.15,corners:1,speed:1,rotate:0,animation:"spinner-line-fade-quick",direction:1,color:"#ffffff",fadeColor:"transparent",top:"50%",left:"50%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"absolute"},h=new S(v),g=()=>{f.classList.remove("is-hidden"),h.spin(f)},m=()=>{f.classList.add("is-hidden"),h.stop()},y=(t,e)=>(u.defaults.baseURL="https://api.unsplash.com",u.defaults.headers.common.Authorization="Client-ID LxvKVGJqiSe6NcEVZOaLXC-f2JIIWZaq_o0WrF8mwJc",u.get("/search/photos",{params:{query:t,page:e,per_page:12,orientation:"portrait"}})),L=t=>t.map(e=>`
    <li class='gallery__item'>
       <img src='${e.urls.small}' alt='${e.alt_description}' class='gallery-img' />
     </li>
   `).join(""),q=(t,e)=>{e<t?l.classList.remove("is-hidden"):(i.info({position:"topRight",message:"We're sorry, but you've reached the end of search results."}),l.classList.add("is-hidden"))},w=()=>{const{height:t}=document.querySelector(".gallery").firstElementChild.getBoundingClientRect();window.scrollBy({top:t*2,behavior:"smooth"})};let a=null,o=1;const E=async t=>{if(t.preventDefault(),g(),o=1,a=t.currentTarget.elements["user-search-query"].value.trim(),!a)return m(),i.warning({position:"center",message:"Empty query"});try{const{data:{results:e,total:c,total_pages:n}}=await y(a,o);if(e.length===0)return p.innerHTML="",l.classList.add("is-hidden"),i.error({position:"center",message:"Sorry, there are no images matching your search query. Please try again!"});i.success({position:"topRight",message:`"Hooray! We found ${c} images."`}),p.innerHTML=L(e),q(n,o)}catch(e){console.log(e)}finally{m()}},M=async()=>{o+=1,g();try{const{data:{results:t,total_pages:e}}=await y(a,o);p.insertAdjacentHTML("beforeend",L(t)),w(),q(e,o)}catch(t){console.log(t)}finally{m()}};b.addEventListener("submit",E);l.addEventListener("click",M);
//# sourceMappingURL=commonHelpers.js.map
